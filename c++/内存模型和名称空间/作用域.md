> 作用域（Scope）决定了标识符（变量、函数、类等）的可见性和生命周期.


---



## 核心作用域类型

### 块作用域
```c++
void demo() 
{
    int x = 10;          // 块作用域开始
    {
        int y = x + 5;   // 嵌套块作用域
        // y 在此处可见
    }                    // y 作用域结束
    // y 不可见 ❌
}                        // x 作用域结束
```

---

### 函数作用域

> 仅适用于标签（`goto` 标签）：

```c++
void func() {
start:                  // 标签作用域（整个函数内可见）
    goto start;         // 合法但应避免使用
}
```

---

### 命名空间作用域

```c++
namespace MyLib 
{
    int count = 0;      // 命名空间作用域变量
    void log() { /*...*/ }
}

int main() {
    MyLib::count++;     // 通过作用域运算符访问
    MyLib::log();
}
```

---

### 类作用域

```c++
class Widget 
{
public:
    static int id;       // 类作用域静态成员
    void draw();         // 成员函数作用域在类内
private:
    int m_state;         // 成员变量作用域在类实例生命周期内
};

int Widget::id = 0;      // 类外定义静态成员

```

---

### 枚举作用域

```c++
enum class Color 
{       // 强类型枚举（作用域限定）
    Red, Green, Blue     // 必须通过 Color:: 访问
};

Color c = Color::Red;    // ✅ 正确
// int i = Red;          // ❌ 错误
```

## 作用域规则

### 隐藏

```c++
int x = 10;              // 全局变量
void demo() 
{
    int x = 20;          // 隐藏全局 x
    std::cout << x;      // 输出 20（局部变量）
    std::cout << ::x;    // 输出 10（全局变量）
}
```

### 生命周期与作用域

| 变量类型   | 生命周期          | 示例                  |
| ------ | ------------- | ------------------- |
| 局部变量   | 块结束时销毁        | `int x = 10;`       |
| 静态局部变量 | 程序结束时销毁       | `static int s = 5;` |
| 动态分配内存 | 直到手动 `delete` | `int* p = new int;` |

### 作用域限定运算符 ::

```c++
namespace A 
{
    int value = 5;
}

int value = 10;

int main() {
    int value = 15;
    std::cout << value;       // 15（局部变量）
    std::cout << ::value;     // 10（全局变量）
    std==cout << A==value;    // 5（命名空间变量）
}
```

