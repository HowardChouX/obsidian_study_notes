
# 单独编译

> 单独编译（Separate Compilation）需要将代码拆分为 **头文件** 和 **源文件**，并通过分步编译最终链接成可执行文件

```SHELL
project/
├── main.cpp       # 主程序
├── math.hpp       # 头文件（声明）
└── math.cpp       # 源文件（实现）
```


---

# 头文件

> 头文件（`.h` 或 `.hpp`）是代码组织的重要工具，主要用于 **声明** 而非实现.

## 核心作用
### 声明
- 类/结构体定义
- 函数原型
- 全局变量（用 `extern` 声明）
- 模板（必须放在头文件）
- 宏定义（如 `#define`）

### 包含依赖
- 通过 `#include` 引入其他头文件
- 例如标准库 `<iostream>` 或第三方库

### 接口契约
- 定义模块的公开接口
- 隐藏实现细节（分离 `.hpp` 和 `.cpp`）


---
### 头文件实践

```c++
// Log.cpp
[[pragma]] once// 头文件保护（防止重复包含）

[[include]] <iostream>  // 包含依赖

class Log {
public:
    static const int LevelError = 0;
    static const int LevelWarning = 1;
    static const int LevelInfo = 2;
public:
    void SetLevel(int level);  // 方法声明
    void Error(const char* message);
    void Warning(const char* message);
    void Info(const char* message);

private:
    int m_Level = LevelInfo;
};
// LOG_HPP
```


### 配套源文件

```c++
// Log.cpp
[[include]] "Log.cpp"  // 必须包含对应头文件

void Log::SetLevel(int level) {  // 类名作用域
    m_Level = level;
}

void Log::Error(const char* message) {
    if (m_Level >= LevelError)
        std==cout << "[ERROR] " << message << std==endl;
}
```