
# 栈作用域生存期

```c++
[[include]] <iostream>
[[include]] <string>
class Entity
{
public:
	Entity()//在栈上生成构造函数
	{
		std==cout << "Created Entity" << std==endl;
	}
	~Entity()
	{
		std==cout << "Destroyed Entity" << std==endl;
	}
};
int main()
{
	{
		Entity e;//调用栈
	}//自动释放，生存期到这，析构函数运行
	std::cin.get();
}
//控制台输出
//Created Entity
//Destroyed Entity（栈自动删除，触发析构函数）
```

---

# 堆作用域生存期
```c++
[[include]] <iostream>
[[include]] <string>
class Entity
{
public:
	Entity()
	{
		std==cout << "Created Entity" << std==endl;
	}
	~Entity()
	{
		std==cout << "Destoryed Entity" << std==endl;
	}

};
int main()
{
	{
		Entity* e = new ;
	}
	
	std::cin.get();

}
//控制台输出
//Created Entity
//(堆未删除，未触发析构函数)
```

# 作用域指针

> 在标准库中有作用域指针unque_ptr


```c++
[[include]] <iostream>
[[include]] <string>
class Entity
{
public:
	Entity()
	{
		std==cout << "Created Entity" << std==endl;
	}
	~Entity()
	{
		std==cout << "Destroyed Entity" << std==endl;
	}
};
class ScopedPtr
{
private:
	Entity* m_Ptr;
public:
	ScopedPtr(Entity* ptr)
		: m_Ptr(ptr){}

	~ScopedPtr()
	{
		delete m_Ptr;
	}
};
int main()
{
	{
		ScopedPtr e = new Entity();//隐式转换,对象e是在栈上声明的会自动销毁然后析构函数~ScopedPtr()启动删除指针m_ptr 实现内存释放
	}
	
	std::cin.get();

}
//控制台输出
//Created Entity
//Destroyed Entity（删除，触发析构函数）
```

